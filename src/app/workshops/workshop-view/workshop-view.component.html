<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="natura-card mt-4 p-2 p-md-5">
        <app-loader [loading]="loading"></app-loader>
        <div class="row"  *ngIf="!loading">
          <div class="col-12">
            <div class="float-left cursor-pointer" appPreviousButton>
              <i class="fas fa-angle-left mr-4"></i><h5 class="font-weight-bold d-inline-block">Regresar</h5>
            </div>
          </div>
          <div class="col-12">
            <img src="/assets/img/icons/gradient-png/workshop.png" class="natura-card-icon">
            <h5 class="mb-0 font-weight-bold mt-2">Nombre del taller</h5>
          </div>
          <div class="col-12 px-3 pb-1 pt-3 mb-4">
            <div class="workshop-type py-5"
                 [style.backgroundImage]="'url(' + workshop.images + ')'">
              <h1 class="text-white ml-2 ml-md-3 my-3 font-weight-bold">{{workshop.name}}</h1>
            </div>
          </div>
          <div class="col-12 col-md-6 col-lg-3 px-3 py-1">
            <div class="natura-card-button p-3 d-flex align-items-center cursor-pointer">
              <div class="date text-center mr-4">
                <small class="font-weight-bold text-uppercase">{{ workshop.start_date | momentDate:'MMM' }}</small>
                <h5 class="text-primary m-0 font-weight-bold">
                  {{ workshop.start_date | momentDate:'DD' }}
                </h5>
              </div>
              <p class="m-0 font-weight-bold m-0">Calendario</p>
            </div>
          </div>
          <div class="col-12 col-md-6 col-lg-3 px-3 py-1">
            <div class="natura-card-button p-3 d-flex align-items-center cursor-pointer"
                 (click)="onAddStaff()" [ngClass]="{'disabled': !enabledAddStaff()}">
              <i class="icon natura-icon-add-staff mr-4"></i>
              <p class="m-0 font-weight-bold m-0">Añadir staff</p>
            </div>
          </div>
          <div class="col-12 col-md-6 col-lg-3 px-3 py-1">
            <div class="natura-card-button p-3 d-flex align-items-center cursor-pointer"
                 (click)="onCheckinLoad()" [ngClass]="{'disabled': !enabledCheckin()}">
              <i class="icon natura-icon-checkin mr-4"></i>
              <p class="m-0 font-weight-bold m-0">Check in</p>
            </div>
          </div>
          <div class="col-12 col-md-6 col-lg-3 px-3 py-1">
            <div class="natura-card-button p-3 d-flex align-items-center cursor-pointer">
              <i class="far fa-2x fa-arrow-alt-circle-down mr-4"></i>
              <p class="m-0 font-weight-bold m-0">Descargar asistencias</p>
            </div>
          </div>
          <div class="col-12 col-md-6 mt-md-3 mb-3 mb-md-0">
            <div class="natura-card h-100">
              <div class="natura-card-header p-3">
                <h4 class="font-weight-bold m-0">Taller</h4>
              </div>
              <div class="natura-card-body">
                <div class="w-100 p-3 d-flex">
                  <app-avatar [consultant]="workshop.author.consultant_avatar" size=""></app-avatar>
                  <div class="ml-3">
                    <p class="font-weight-bold m-0">Creado por</p>
                    <p class="font-weight-bold m-0 text-primary">{{workshop.author.full_name}}</p>
                  </div>
                </div>
                <div class="w-100 px-3 pb-3">
                  <p class="m-0">{{workshop.description}}</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6 mt-md-3 mb-3 mb-md-0">
            <div class="natura-card h-100">
              <div class="natura-card-header p-3">
                <h4 class="font-weight-bold m-0 d-inline-block">Información</h4>
                <div class="mt-1 btn-group float-right" dropdown placement="bottom right">
                  <i class="fas fa-bars cursor-pointer" dropdownToggle></i>
                  <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu dropdown-menu-right"
                      role="menu" aria-labelledby="button-basic">
                    <li role="menuitem">
                      <a class="dropdown-item"
                         (click)="onAttendanceListLoad()">
                        <p class="my-2">
                          <i class="natura-icon-register-list mr-3 font-weight-bold"></i>
                          <span>Lista de registro</span>
                        </p>
                      </a>
                    </li>
                    <li role="menuitem">
                      <a class="dropdown-item"
                         (click)="onSendReport()">
                        <p class="my-2">
                          <i class="natura-icon-send-report mr-3 font-weight-bold"></i>
                          <span>Enviar reporte</span>
                        </p>
                      </a>
                    </li>
                    <li role="menuitem">
                      <a class="dropdown-item"
                         (click)="onEditWorkshop()">
                        <p class="my-2">
                          <i class="natura-icon-workshop mr-3 font-weight-bold"></i>
                          <span>Editar taller</span>
                        </p>
                      </a>
                    </li>
                    <li role="menuitem">
                      <a class="dropdown-item"
                         (click)="onDeleteWorkshop()">
                        <p class="my-2">
                          <i class="natura-icon-trash mr-3 font-weight-bold"></i>
                          <span>Borrar taller</span>
                        </p>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="natura-card-body">
                <div class="w-100 p-3">
                  <p>
                    <i class="natura-icon-id mr-3 font-weight-bold"></i>
                    <span>ID {{workshop.id}}</span>
                  </p>
                  <p *ngIf="isWorkshopLeader()">
                    <i class="natura-icon-attendance mr-3 font-weight-bold"></i>
                    <span class="text-primary">{{workshop.assists.length}} </span>
                    persona<span *ngIf="workshop.assists.length !== 1">s</span> registrada<span *ngIf="workshop.assists.length !== 1">s</span>
                  </p>
                  <p>
                    <i class="far fa-clock mr-3"></i>
                    <span>{{workshop.start_date | momentDate:'hh:mm A'}}</span>
                  </p>
                  <p *ngIf="workshop.position_string">
                    <i class="fas fa-map-marker-alt mr-3"></i>
                    <a [href]="getMapsURI()" target="_blank">
                      <u>{{workshop.position_string}}</u>
                    </a>
                  </p>
                  <p *ngIf="workshop.sede">
                    <i class="fas fa-map-pin mr-3"></i>
                    <span>{{workshop.sede}}</span>
                  </p>
                  <p *ngIf="workshop.specialist">
                    <i class="far fa-user mr-3"></i>
                    <span>{{workshop.specialist}}</span>
                  </p>
                </div>
                <div class="w-100 text-right p-3">
                  <div class="d-inline-block cursor-pointer mr-3" (click)="toggleShare()">
                    <i class="natura-icon-share align-middle mr-3"></i>
                    <span class="font-weight-bold align-middle">Compartir</span>
                  </div>
                  <div class="d-inline-block" *ngIf="showShare">
                    <share-buttons [show]="3" [url]="shareURL"
                                   [include]="['facebook','twitter','whatsapp','linkedin','pinterest','telegram','email']"
                                   [title]="workshop.name" [theme]="'modern-light'"
                                   [description]="workshop.description"
                                   [image]="workshop.images"
                                   [autoSetMeta]="false"
                    ></share-buttons>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr>
        <app-massive-upload
          *ngIf="!loading"
          uploadName="asistencias"
          downloadUrl="https://s3-us-west-2.amazonaws.com/minatura/web/formatos/asistencias.xlsx"
          [serviceUrl]="'/api/v1/consultant/' + workshop.id + '/report_assistance'"
        ></app-massive-upload>
      </div>
    </div>
  </div>
</div>
